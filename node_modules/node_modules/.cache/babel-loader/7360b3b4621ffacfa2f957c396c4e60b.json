{"ast":null,"code":"import Keycloak from\"keycloak-js\";var _kc=new Keycloak('/keycloak.json');/**\n * Initializes Keycloak instance and calls the provided callback function if successfully authenticated.\n *\n * @param onAuthenticatedCallback\n */var initKeycloak=function initKeycloak(onAuthenticatedCallback){_kc.init({onLoad:'check-sso',silentCheckSsoRedirectUri:window.location.origin+'/silent-check-sso.html',pkceMethod:'S256'}).then(function(authenticated){if(!authenticated){console.log(\"user is not authenticated..!\");}console.log(onAuthenticatedCallback);onAuthenticatedCallback();}).catch(console.error);};var doLogin=_kc.login;var doLogout=_kc.logout;var getToken=function getToken(){return _kc.token;};var isLoggedIn=function isLoggedIn(){return!!_kc.token;};var updateToken=function updateToken(successCallback){return _kc.updateToken(5).then(successCallback).catch(doLogin);};var getUsername=function getUsername(){var _kc$tokenParsed;return(_kc$tokenParsed=_kc.tokenParsed)===null||_kc$tokenParsed===void 0?void 0:_kc$tokenParsed.preferred_username;};var getFullName=function getFullName(){var _kc$tokenParsed2;return(_kc$tokenParsed2=_kc.tokenParsed)===null||_kc$tokenParsed2===void 0?void 0:_kc$tokenParsed2.name;};var hasRole=function hasRole(roles){return roles.some(function(role){return _kc.hasRealmRole(role);});};var UserService={initKeycloak:initKeycloak,doLogin:doLogin,doLogout:doLogout,isLoggedIn:isLoggedIn,getFullName:getFullName,getToken:getToken,updateToken:updateToken,getUsername:getUsername,hasRole:hasRole};export default UserService;","map":{"version":3,"names":["Keycloak","_kc","initKeycloak","onAuthenticatedCallback","init","onLoad","silentCheckSsoRedirectUri","window","location","origin","pkceMethod","then","authenticated","console","log","catch","error","doLogin","login","doLogout","logout","getToken","token","isLoggedIn","updateToken","successCallback","getUsername","tokenParsed","preferred_username","getFullName","name","hasRole","roles","some","role","hasRealmRole","UserService"],"sources":["/Users/trams/Documents/CS585PROJECT/students_portal_frontend/src/utilities/UserService.js"],"sourcesContent":["import Keycloak from \"keycloak-js\";\n\nconst _kc = new Keycloak('/keycloak.json');\n\n/**\n * Initializes Keycloak instance and calls the provided callback function if successfully authenticated.\n *\n * @param onAuthenticatedCallback\n */\nconst initKeycloak = (onAuthenticatedCallback) => {\n  _kc.init({\n    onLoad: 'check-sso',\n    silentCheckSsoRedirectUri: window.location.origin + '/silent-check-sso.html',\n    pkceMethod: 'S256',\n  })\n    .then((authenticated) => {\n      if (!authenticated) {\n        console.log(\"user is not authenticated..!\");\n      }\n      console.log(onAuthenticatedCallback);\n      onAuthenticatedCallback();\n    })\n    .catch(console.error);\n};\n\nconst doLogin = _kc.login;\n\nconst doLogout = _kc.logout;\n\nconst getToken = () => _kc.token;\n\nconst isLoggedIn = () => !!_kc.token;\n\nconst updateToken = (successCallback) =>\n  _kc.updateToken(5)\n    .then(successCallback)\n    .catch(doLogin);\n\nconst getUsername = () => _kc.tokenParsed?.preferred_username;\n\nconst getFullName = () => _kc.tokenParsed?.name;\n\nconst hasRole = (roles) => roles.some((role) => _kc.hasRealmRole(role));\n\nconst UserService = {\n  initKeycloak,\n  doLogin,\n  doLogout,\n  isLoggedIn,\n  getFullName,\n  getToken,\n  updateToken,\n  getUsername,\n  hasRole,\n};\n\nexport default UserService;\n"],"mappings":"AAAA,MAAOA,SAAQ,KAAM,aAAa,CAElC,GAAMC,IAAG,CAAG,GAAID,SAAQ,CAAC,gBAAgB,CAAC,CAE1C;AACA;AACA;AACA;AACA,GACA,GAAME,aAAY,CAAG,QAAfA,aAAY,CAAIC,uBAAuB,CAAK,CAChDF,GAAG,CAACG,IAAI,CAAC,CACPC,MAAM,CAAE,WAAW,CACnBC,yBAAyB,CAAEC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAG,wBAAwB,CAC5EC,UAAU,CAAE,MACd,CAAC,CAAC,CACCC,IAAI,CAAC,SAACC,aAAa,CAAK,CACvB,GAAI,CAACA,aAAa,CAAE,CAClBC,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC,CAC7C,CACAD,OAAO,CAACC,GAAG,CAACX,uBAAuB,CAAC,CACpCA,uBAAuB,EAAE,CAC3B,CAAC,CAAC,CACDY,KAAK,CAACF,OAAO,CAACG,KAAK,CAAC,CACzB,CAAC,CAED,GAAMC,QAAO,CAAGhB,GAAG,CAACiB,KAAK,CAEzB,GAAMC,SAAQ,CAAGlB,GAAG,CAACmB,MAAM,CAE3B,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,SAASpB,IAAG,CAACqB,KAAK,GAEhC,GAAMC,WAAU,CAAG,QAAbA,WAAU,SAAS,CAAC,CAACtB,GAAG,CAACqB,KAAK,GAEpC,GAAME,YAAW,CAAG,QAAdA,YAAW,CAAIC,eAAe,QAClCxB,IAAG,CAACuB,WAAW,CAAC,CAAC,CAAC,CACfb,IAAI,CAACc,eAAe,CAAC,CACrBV,KAAK,CAACE,OAAO,CAAC,GAEnB,GAAMS,YAAW,CAAG,QAAdA,YAAW,8CAASzB,GAAG,CAAC0B,WAAW,0CAAf,gBAAiBC,kBAAkB,GAE7D,GAAMC,YAAW,CAAG,QAAdA,YAAW,gDAAS5B,GAAG,CAAC0B,WAAW,2CAAf,iBAAiBG,IAAI,GAE/C,GAAMC,QAAO,CAAG,QAAVA,QAAO,CAAIC,KAAK,QAAKA,MAAK,CAACC,IAAI,CAAC,SAACC,IAAI,QAAKjC,IAAG,CAACkC,YAAY,CAACD,IAAI,CAAC,GAAC,GAEvE,GAAME,YAAW,CAAG,CAClBlC,YAAY,CAAZA,YAAY,CACZe,OAAO,CAAPA,OAAO,CACPE,QAAQ,CAARA,QAAQ,CACRI,UAAU,CAAVA,UAAU,CACVM,WAAW,CAAXA,WAAW,CACXR,QAAQ,CAARA,QAAQ,CACRG,WAAW,CAAXA,WAAW,CACXE,WAAW,CAAXA,WAAW,CACXK,OAAO,CAAPA,OACF,CAAC,CAED,cAAeK,YAAW"},"metadata":{},"sourceType":"module"}